{% extends 'base.html.twig' %}

{% block title %}JeuVideo index
{% endblock %}

{% block body %}
	<div class="container">
		<div class="d-flex justify-content-between align-items-center mb-4" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
			<h1>ðŸŽ® JeuVideo Index</h1>
			<a href="{{ path('app_jeu_video_new') }}" class="btn btn-primary">
				+ CrÃ©er un nouveau
			</a>
		</div>

		<div class="card">
			<div class="table-responsive">
				<table class="table">
					<thead>
						<tr>
							<th>Image</th>
							<th>Titre</th>
							<th>Genre</th>
							<th>Editeur</th>
							<th>Developpeur</th>
							<th>Date Sortie</th>
							<th>Prix</th>
							<th>Actions</th>
						</tr>
					</thead>
					<tbody>
						{% for jeu_video in jeu_videos %}
							<tr>
								<td>
									{% if jeu_video.imageUrl %}
										{% if jeu_video.imageUrl starts with 'http' %}
											<img src="{{ jeu_video.imageUrl }}" alt="{{ jeu_video.titre }}" class="img-thumbnail" onerror="this.src='https://via.placeholder.com/40'">
										{% else %}
											<img src="{{ asset(jeu_video.imageUrl) }}" alt="{{ jeu_video.titre }}" class="img-thumbnail" onerror="this.src='https://via.placeholder.com/40'">
										{% endif %}
									{% else %}
										<span style="display:inline-block; width:40px; height:40px; background:#eee; border-radius:8px;"></span>
									{% endif %}
								</td>
								<td style="font-weight: 600;">{{ jeu_video.titre }}</td>
								<td>
									{% if jeu_video.genre %}
										<span class="badge" style="background:#eef2ff; color:#4f46e5; padding:4px 8px; border-radius:4px; font-size:0.75rem; font-weight:600;">{{ jeu_video.genre.nom }}</span>
									{% endif %}
								</td>
								<td>{{ jeu_video.editeur ? jeu_video.editeur.nom : '' }}</td>
								<td>{{ jeu_video.developpeur }}</td>
								<td>{{ jeu_video.dateSortie ? jeu_video.dateSortie|date('d/m/Y') : '-' }}</td>
								<td style="font-family: monospace;">{{ jeu_video.prix }}
									â‚¬</td>
								<td>
									<a href="{{ path('app_jeu_video_show', {'id': jeu_video.id}) }}" class="btn btn-show btn-sm">Voir</a>
									<a href="{{ path('app_jeu_video_edit', {'id': jeu_video.id}) }}" class="btn btn-edit btn-sm">Modifier</a>
								</td>
							</tr>
						{% else %}
							<tr>
								<td colspan="7" style="text-align:center; padding: 2rem; color: #6b7280;">
									Aucun jeu trouvÃ©.
									<a href="{{ path('app_jeu_video_new') }}" style="color: var(--primary);">En crÃ©er un ?</a>
								</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
	</div>
{% endblock %}
